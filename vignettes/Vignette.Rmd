---
title: "Visualization with `anvis`"
author:
- name: Robert Koetsier
  affiliation: Wageningen University, Wageningen, The Netherlands
- name: Sanjeevan Jahagirdar
  affiliation: Wageningen University, Wageningen, The Netherlands
output: 
  BiocStyle::html_document:
    toc: true
    toc_depth: 2
    toc_float: true
package: anvis
abstract: >
  Creating and customizing network visualizations.
vignette: >
  %\VignetteIndexEntry{Visualization with anvis}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

# Introduction 

## About `anvis`

The `anvis` package was developed to automate the process of creating network visualizations. It generates styling for visual properties of networks to highlight the most relevant edges and nodes. In addition, the package can be used to create visualizations for multiple networks at once, allowing for easy comparison of similar networks. For creating visualizations this package relies on software that is popular for network visualization: [Cytoscape](https://cytoscape.org/) (accessed with `r Biocpkg("RCy3")`), and `r CRANpkg("igraph")`. Any user familiar with this software will be easily able to extend and customize the visualizations made with `netvis`. To provide the freedom to make visualizations with other software, `netvis` offers exports of networks and the added attributes (e.g. node size and edge color) in various common formats. To obtain the best results relatively small networks (< 150 nodes) should be used. For visualization of larger networks we refer users to the package `r Biocpkg("netbiov")`, as this package offers a variety of options aimed at visualization of large networks. 

## Installation

For installation of the package run the following code:

```{r installation, eval=FALSE}
if (!requireNamespace("BiocManager", quietly=TRUE))
    install.packages("BiocManager")
BiocManager::install("anvis")
```


# How to use - Basic example

Here we will give some demonstrations. Start by loading the package.

```{r loading}
library(anvis)
```

## Brief introduction of example data

# Options for adding attributes 

## Changing edge colors with custom color function

* `Rcoloramp` can be used to convert colors to a spectrum. 
* demonstrate how to flip color spectra: 

```{r color_func}
# when the colors are opposite of what you expect
my_cols <- function (n) rev(pals::magma(n))
```

* Colors go from low to high values
* for positive and negative weights the colors are split into two halves, to be assigned to either sign

# Data preparation

* adjacency matrix
* edgelist can be used, by converting to to adjacency 

# Visualizing with igraph

## Changing the layout of the nodes

* Explain how alternative layouts can be used, and how the node order can be maintained

## Visualization of multiple networks

* Options to visualize side by side
* manually adjust the layout of the grid
* add titles to the grid elements

## Further customization

* give some examples, to demonstrate that the full set of options of igraph is still available

## Directionality

* Arrows, self loops
* Recommend to use cytoscape instead of igraph since it looks neater

# Visualizing cytoscape

## Visualization of multiple networks

* Multiple networks can be visualized, but they are either show in the session or saved seperately. No option to show side by side. 
* One option to show graphs side by side: - [arrange network windows](http://manual.cytoscape.org/en/stable/Quick_Tour_of_Cytoscape.html#:~:text=Arrange%20Network%20Windows)
* for easiest comparison we recommend igraph

## Directionality

* Arrows, self loops

## Using `r Biocpkg("RCy3")` for further customization

* Show at least one example to change some visual features of the network. 

# Session info

This vignette was made with `r CRANpkg("rmarkdown")` and `r Biocpkg("BiocStyle")`. Below the output generated by `sessionInfo()` when this document was compiled:

```{r sessionInfo, echo=FALSE}
sessionInfo()
```


